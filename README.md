# geoTIFF-ranking

## scripts/aggragate.py

This tool is taking 
- a geoJson generated by [overpass turbo](https://overpass-turbo.osm.ch/) 
- a geoTiff file with values (such as [this](https://qrank.toolforge.org/download/osmviews.tiff) geoTiff which contains views for a tile in OpenStreetMap)

and creates a copy of the geoJson, now containing the value at the given location of the item in the geoTiff, as well as being ranked by this value.

Requires [GDAL](https://gdal.org/) to be installed on the executing machine.

To use, copy a geoTiff, a geoJson and the [aggregate.py](https://github.com/geometalab/geoTIFF-ranking/blob/main/gdal.py) script in the same directory and execute the script.

Remarks:
- If you want to create your own overpass query, make sure to set the out statement to "out center;"

## scripts/generateRanking.py

Takes in the generated file from aggregate.py and the qrank.csv from [QRank](https://qrank.wmcloud.org/), and ranks all features with a `wikidata` tag.

This script takes the supplied geojson, adds the `qrank` value for all features with a `wikidata` tag. If a feature does not contain a `wikidata` tag, it is discarded. The tags qrank_rank and osm_views_rank are also added, which are numeric ranks, the highest viewed feature respectively being ranked 1.

It outputs:
- **output-qrank.geojson**, sorted by qrank, the highest value first.
- **output-tile-logs-synced.geojson**, sorted by OSM Tile Views, the highest value first.

These two files can be used to compare the two methods of ranking (QRank and OSM Tile Views).

## distribution-web-viewer
A web app based on React which can be used to View Value vs Rank distribution of the files generated by generateRanking.py
